# æ…ˆæ¿Ÿ 60 é€±å¹´æ´»å‹•ç¶²ç«™ - å®Œæ•´æ–‡ä»¶

> æ…ˆæ¿ŸåŸºé‡‘æœƒ 60 é€±å¹´ç´€å¿µæ´»å‹•ç¶²ç«™ï¼Œä½¿ç”¨ Lit Web Components + Deno + PostgreSQL å»ºæ§‹çš„ç¾ä»£åŒ– SPA æ‡‰ç”¨ç¨‹å¼ã€‚

---

## å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆç‚ºæ…ˆæ¿ŸåŸºé‡‘æœƒ 60 é€±å¹´ç´€å¿µæ´»å‹•æ‰“é€ çš„å®˜æ–¹ç¶²ç«™ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
- æ´»å‹•è³‡è¨Šç€è¦½èˆ‡æ™‚ç¨‹æŸ¥è©¢
- ä¸»é¡Œåˆ†é¡æ¢ç´¢
- å½±éŸ¿åŠ›æ•¸æ“šå±•ç¤º
- ç¥ç¦èªæ”¶éŒ„èˆ‡å±•ç¤º
- åœ–ç‰‡åº«ç®¡ç†

### æŠ€è¡“æ£§

| å±¤ç´š | æŠ€è¡“ |
|------|------|
| å‰ç«¯æ¡†æ¶ | Lit Web Components + TypeScript |
| å‰ç«¯ç‹€æ…‹ | @lit/context + Store pattern |
| å‰ç«¯å»ºç½® | Vite (via Deno) |
| å¾Œç«¯é‹è¡Œæ™‚ | Deno |
| å¾Œç«¯æ¡†æ¶ | Hono |
| è³‡æ–™åº« | PostgreSQL 18 |
| å®¹å™¨åŒ– | Docker Compose |

---

## é–‹ç™¼æŒ‡ä»¤

```bash
# ä¸€éµå•Ÿå‹• (è³‡æ–™åº« + API + å‰ç«¯)
deno task start

# æˆ–åˆ†é–‹åŸ·è¡Œï¼š
deno task db:up      # å•Ÿå‹• PostgreSQL
deno task dev        # åŒæ™‚å•Ÿå‹• API + å‰ç«¯
deno task dev:api    # åªå•Ÿå‹• API (port 8000)
deno task dev:web    # åªå•Ÿå‹•å‰ç«¯ (port 5173)
```

---

## å°ˆæ¡ˆçµæ§‹

```
/
â”œâ”€â”€ docker-compose.yml          # PostgreSQL container
â”œâ”€â”€ db/
â”‚   â””â”€â”€ init.sql               # Database schema + seed data
â”œâ”€â”€ api/                       # Deno + Hono backend
â”‚   â”œâ”€â”€ deno.json
â”‚   â”œâ”€â”€ main.ts               # API é€²å…¥é»
â”‚   â”œâ”€â”€ db.ts                 # PostgreSQL é€£ç·š
â”‚   â”œâ”€â”€ openapi.yaml          # OpenAPI è¦æ ¼
â”‚   â”œâ”€â”€ uploads/gallery/      # ä¸Šå‚³çš„åœ–ç‰‡
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ topics.ts         # ä¸»é¡Œ API
â”‚       â”œâ”€â”€ events.ts         # æ´»å‹• API
â”‚       â”œâ”€â”€ impact.ts         # å½±éŸ¿åŠ› API
â”‚       â”œâ”€â”€ blessings.ts      # ç¥ç¦èª API
â”‚       â”œâ”€â”€ gallery.ts        # åœ–ç‰‡åº« API
â”‚       â””â”€â”€ homepage.ts       # é¦–é  API
â””â”€â”€ web/                       # Lit frontend
    â”œâ”€â”€ deno.json
    â”œâ”€â”€ vite.config.ts
    â”œâ”€â”€ index.html
    â””â”€â”€ src/
        â”œâ”€â”€ main.ts
        â”œâ”€â”€ styles/global.css
        â”œâ”€â”€ services/api.ts    # API å®¢æˆ¶ç«¯
        â”œâ”€â”€ stores/            # ç‹€æ…‹ç®¡ç†
        â”œâ”€â”€ contexts/          # Lit Context
        â”œâ”€â”€ controllers/       # Lit Controllers
        â””â”€â”€ components/        # Web Components
```

---

## API ç«¯é»è¦æ ¼

### Topics (ä¸»é¡Œ)

#### GET /api/topics
å–å¾—æ‰€æœ‰ä¸»é¡Œåˆ—è¡¨ã€‚

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
[
  {
    "id": 1,
    "name": "åˆä½œ",
    "subtitle": "æ”œæ‰‹å‰è¡Œ",
    "description": "èˆ‡å„ç•Œåˆä½œæ¨å‹•å…¬ç›Š...",
    "icon": "ğŸ¤",
    "background_image": "https://...",
    "sort_order": 1
  }
]
```

#### GET /api/topics/:id
å–å¾—å–®ä¸€ä¸»é¡Œè©³æƒ…ï¼ŒåŒ…å«ç›¸é—œæ´»å‹•ã€‚

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "id": 1,
  "name": "åˆä½œ",
  "subtitle": "æ”œæ‰‹å‰è¡Œ",
  "description": "èˆ‡å„ç•Œåˆä½œæ¨å‹•å…¬ç›Š...",
  "icon": "ğŸ¤",
  "background_image": "https://...",
  "sort_order": 1,
  "events": [
    {
      "id": 1,
      "title": "ç·šä¸Šæµ´ä½›",
      "date_start": "2026-08-28",
      "date_end": "2026-09-05",
      "participation_type": "ç·šä¸Šåƒèˆ‡",
      "participation_fee": "å…è²»",
      "image_url": "https://..."
    }
  ]
}
```

### Events (æ´»å‹•)

#### GET /api/events
å–å¾—æ´»å‹•åˆ—è¡¨ï¼Œæ”¯æ´ç¯©é¸ã€‚

**Query åƒæ•¸ï¼š**
- `month` (number): æœˆä»½ (1-12)
- `year` (number): å¹´ä»½
- `topic_id` (number): ä¸»é¡Œ ID

**ç¯„ä¾‹ï¼š**
- `/api/events?month=8&year=2026` - å–å¾— 2026 å¹´ 8 æœˆçš„æ´»å‹•
- `/api/events?topic_id=1` - å–å¾—ä¸»é¡Œ 1 çš„æ´»å‹•

#### GET /api/events/:id
å–å¾—å–®ä¸€æ´»å‹•è©³æƒ…ã€‚

### Impact (å½±éŸ¿åŠ›)

#### GET /api/impact
å–å¾—å½±éŸ¿åŠ›å€å¡Šè³‡æ–™ï¼Œç”¨æ–¼ä¸‰è§’å½¢åœ–è¡¨é¡¯ç¤ºã€‚

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
[
  {
    "id": 1,
    "name": "ç¤¾å€",
    "icon": "ğŸ˜ï¸",
    "stat_value": "5,000+",
    "stat_label": "æœå‹™æ“šé»",
    "sort_order": 1
  }
]
```

### Blessings (ç¥ç¦èª)

#### GET /api/blessings
å–å¾—ç¥ç¦èªåˆ—è¡¨ã€‚

**Query åƒæ•¸ï¼š**
- `featured` (boolean): è¨­ç‚º `true` åƒ…å–å¾—ç²¾é¸ç¥ç¦èª

#### GET /api/blessings/:id
å–å¾—å–®ä¸€ç¥ç¦èªå®Œæ•´å…§å®¹ã€‚

### Gallery (åœ–ç‰‡åº«)

#### GET /api/gallery
å–å¾—æ‰€æœ‰å·²å•Ÿç”¨çš„åœ–ç‰‡ã€‚

#### GET /api/gallery/random?count=15
éš¨æ©Ÿå–å¾—æŒ‡å®šæ•¸é‡çš„åœ–ç‰‡ï¼Œç”¨æ–¼é¦–é  60 åœ–ç‰‡ç¶²æ ¼ã€‚

#### POST /api/gallery
ä¸Šå‚³åœ–ç‰‡ã€‚

**Request Body (multipart/form-data)ï¼š**
- `file`: åœ–ç‰‡æª”æ¡ˆ (æ”¯æ´ jpeg, png, webp, gif)

#### DELETE /api/gallery/:id
è»Ÿåˆªé™¤åœ–ç‰‡ã€‚

### Homepage (é¦–é )

#### GET /api/homepage
å–å¾—é¦–é å…§å®¹ã€‚

#### PUT /api/homepage
æ›´æ–°é¦–é å…§å®¹ï¼ˆæ”¯æ´éƒ¨åˆ†æ›´æ–°ï¼‰ã€‚

---

## å‰ç«¯å…ƒä»¶æ¶æ§‹

### æ ¸å¿ƒå…ƒä»¶

#### app-root
æ ¹å…ƒä»¶ï¼Œè² è²¬ï¼š
- æä¾› AppStore å’Œ DataStore Context
- è™•ç†æ¡Œé¢/è¡Œå‹•è£ç½®æ¨¡å¼åˆ‡æ›
- è·¯ç”±æ§åˆ¶ï¼ˆé¡¯ç¤ºé¦–é æˆ–å…§å®¹é ï¼‰

#### app-homepage
é¦–é å…ƒä»¶ï¼ŒåŒ…å«ï¼š
- homepage-grid: 60 åœ–ç‰‡åœ“å½¢ç¶²æ ¼
- æ¨™èªå€ (slogan)
- å…§å®¹å€ (title, description)
- homepage-tabs: Tab é¸å–®

#### homepage-grid
4x5 åœ“å½¢åœ–ç‰‡ç¶²æ ¼ï¼Œé€éç©ºç™½ä½ç½®å½¢æˆã€Œ60ã€æ•¸å­—é€ å‹ï¼š
- æ‰‹æ©Ÿç‰ˆ: å–®å€‹ 6 å­—å½¢
- æ¡Œé¢ç‰ˆ: å®Œæ•´ 60 é›™æ•¸å­—

#### sheet-content
Tab å…§å®¹å€ï¼Œæ ¹æ“š activeTab åˆ‡æ›é¡¯ç¤ºï¼š
- `topics`: ä¸»é¡Œå¡ç‰‡åˆ—è¡¨
- `schedule`: æœˆä»½é¸æ“‡å™¨ + æ´»å‹•æ™‚ç¨‹è¡¨
- `impact`: å½±éŸ¿åŠ›ä¸‰è§’åœ–è¡¨ + ç¥ç¦èªå¡ç‰‡

### é é¢å…ƒä»¶

#### topic-page
ä¸»é¡Œè©³æƒ…é é¢ï¼š
- èƒŒæ™¯åœ–ç‰‡
- æ¨™é¡Œã€å‰¯æ¨™é¡Œã€æè¿°
- ç›¸é—œæ´»å‹•åˆ—è¡¨ï¼ˆæ–¹å½¢å¡ç‰‡ç¶²æ ¼ï¼‰
- è¿”å›æŒ‰éˆ•ï¼ˆå«é€€å‡ºå‹•ç•«ï¼‰

#### blessing-page
ç¥ç¦èªè©³æƒ…é é¢ï¼š
- ä½œè€…æ¨™é¡Œ
- å®Œæ•´ç¥ç¦å…§å®¹
- è¿”å›æŒ‰éˆ•ï¼ˆå«é€€å‡ºå‹•ç•«ï¼‰

---

## å‹•ç•«æ•ˆæœ

æ‰€æœ‰å…ƒä»¶éƒ½å¯¦ä½œäº†æµæš¢çš„ CSS å‹•ç•«ï¼š

### å…¥å ´å‹•ç•«
- å®¹å™¨æ·¡å…¥ (contentFadeIn)
- å¡ç‰‡äº¤éŒ¯æ»‘å…¥ (cardSlideIn)
- åœ“å½¢å½ˆå‡º (circlePopIn)
- æ¨™èªå­—è©æ»‘å…¥ (wordSlideIn)

### äº’å‹•å‹•ç•«
- å¡ç‰‡ hover æµ®èµ·æ•ˆæœ
- æŒ‰éˆ• hover ç¸®æ”¾æ•ˆæœ
- Tab æ»‘å‹•æŒ‡ç¤ºå™¨

### é€€å‡ºå‹•ç•«
- é é¢æ»‘å‡º (slideOutPage)
- é é¢æ·¡å‡º (fadeOutPage)

---

## è³‡æ–™åº«çµæ§‹

### topics è¡¨
ä¸»é¡Œè³‡æ–™ï¼Œç”¨æ–¼ã€Œçœ‹ä¸»é¡Œã€Tabã€‚

### events è¡¨
æ´»å‹•è³‡æ–™ï¼Œé—œè¯åˆ° topicsï¼Œç”¨æ–¼ã€Œçœ‹æ™‚ç¨‹ã€Tab å’Œä¸»é¡Œè©³æƒ…é ã€‚

### impact_sections è¡¨
å½±éŸ¿åŠ›å€å¡Šï¼Œç”¨æ–¼ã€Œçœ‹å½±éŸ¿ã€Tab çš„ä¸‰è§’åœ–è¡¨ã€‚

### blessings è¡¨
ç¥ç¦èªè³‡æ–™ï¼Œç”¨æ–¼ã€Œçœ‹å½±éŸ¿ã€Tab çš„ç¥ç¦å¡ç‰‡å€ã€‚

### gallery è¡¨
åœ–ç‰‡åº« metadataï¼Œå¯¦éš›åœ–ç‰‡å­˜æ”¾æ–¼ uploads/gallery/ã€‚

### homepage è¡¨
é¦–é å…§å®¹ï¼ˆæ¨™èªã€æ¨™é¡Œã€èªªæ˜ï¼‰ã€‚

---

## éŸ¿æ‡‰å¼è¨­è¨ˆ

- **è¡Œå‹•è£ç½® (<768px)**: å–®æ¬„ä½ˆå±€ï¼Œå›ºå®š overlay é é¢
- **å¹³æ¿/æ¡Œé¢ (>=768px)**: é›™æ¬„ä½ˆå±€ï¼Œå·¦å´å…§å®¹å³å´è©³æƒ…é 

é€é `desktopMode` å±¬æ€§åˆ‡æ›å…ƒä»¶çš„é¡¯ç¤ºæ¨¡å¼ã€‚
